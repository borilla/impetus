!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=document,i=!!function(){var e=!1;try{var t=function(){},n=Object.defineProperty({},"passive",{get:function(){e=!0}});addEventListener("test",t,n),removeEventListener("test",t,n)}catch(e){}return e}()&&{passive:!0},r=function e(t){function r(){x.call(y,S,U)}function u(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function s(e){var t=u(e);if(!Y&&!j){Y=!0,C=!1,F=t.id,g=q=t.x,T=A=t.y,D=[],d(g,T);var n=o.addEventListener;n("touchmove",c,i),n("touchend",a),n("touchcancel",f),n("mousemove",c,i),n("mouseup",a)}}function c(e){var t=u(e);Y&&t.id===F&&(q=t.x,A=t.y,d(g,T),m())}function a(e){var t=u(e);Y&&t.id===F&&f()}function f(){Y=!1,d(g,T),h();var e=o.removeEventListener;e("touchmove",c),e("touchend",a),e("touchcancel",f),e("mouseup",a),e("mousemove",c)}function d(e,t){for(var n=Date.now();D.length>0&&!(n-D[0].time<=100);)D.shift();D.push({x:e,y:t,time:n})}function v(){var e=q-g,t=A-T;S+=e*w,U+=t*w,r(),g=q,T=A,X=!1}function m(){X||requestAnimationFrame(v),X=!0}function h(){var e=D[0],t=D[D.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,r=i/15/w;I=n/r||0,P=o/r||0,(Math.abs(I)>1||Math.abs(P)>1)&&(C=!0,requestAnimationFrame(l))}function l(){C&&(I*=b,P*=b,S+=I,U+=P,Math.abs(I)>V||Math.abs(P)>V?(r(),requestAnimationFrame(l)):C=!1)}var p=t.source,y=void 0===p?document:p,x=t.update,E=t.multiplier,w=void 0===E?1:E,L=t.friction,b=void 0===L?.92:L,M=t.initialValues;n(this,e);var g,T,q,A,F,I,P,S=0,U=0,V=.3*w,X=!1,Y=!1,j=!1,C=!1,D=[];!function(){if(!(y="string"==typeof y?o.querySelector(y):y))throw new Error("IMPETUS: source not found.");if(!x)throw new Error("IMPETUS: update function not defined.");M&&(M[0]&&(S=M[0]),M[1]&&(U=M[1]),r()),y.addEventListener("touchstart",s,i),y.addEventListener("mousedown",s)}(),this.destroy=function(){return y.removeEventListener("touchstart",s),y.removeEventListener("mousedown",s),null},this.pause=function(){Y=!1,j=!0},this.resume=function(){j=!1},this.setValues=function(e,t){"number"==typeof e&&(S=e),"number"==typeof t&&(U=t)},this.setMultiplier=function(e){w=e,V=.3*w}};t.exports=r});