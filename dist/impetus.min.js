!function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.Impetus=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=document,i=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};addEventListener("touchmove",n,t)}catch(e){}return e}()&&{passive:!1},u=function e(t){function u(){x.call(y,S,D)}function r(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function c(e){var t=r(e);if(!X&&!Y){X=!0,j=!1,F=t.id,g=q=t.x,T=A=t.y,C=[],d(g,T);var n=o.addEventListener;n("touchmove",s,i),n("touchend",a),n("touchcancel",f),n("mousemove",s,i),n("mouseup",a)}}function s(e){e.preventDefault();var t=r(e);X&&t.id===F&&(q=t.x,A=t.y,d(g,T),m())}function a(e){var t=r(e);X&&t.id===F&&f()}function f(){X=!1,d(g,T),h();var e=o.removeEventListener;e("touchmove",s),e("touchend",a),e("touchcancel",f),e("mouseup",a),e("mousemove",s)}function d(e,t){for(var n=Date.now();C.length>0&&!(n-C[0].time<=100);)C.shift();C.push({x:e,y:t,time:n})}function v(){var e=q-g,t=A-T;S+=e*w,D+=t*w,u(),g=q,T=A,V=!1}function m(){V||requestAnimationFrame(v),V=!0}function h(){var e=C[0],t=C[C.length-1],n=t.x-e.x,o=t.y-e.y,i=t.time-e.time,u=i/15/w;I=n/u||0,P=o/u||0,(Math.abs(I)>1||Math.abs(P)>1)&&(j=!0,requestAnimationFrame(l))}function l(){j&&(I*=L,P*=L,S+=I,D+=P,Math.abs(I)>U||Math.abs(P)>U?(u(),requestAnimationFrame(l)):j=!1)}var p=t.source,y=void 0===p?document:p,x=t.update,E=t.multiplier,w=void 0===E?1:E,b=t.friction,L=void 0===b?.92:b,M=t.initialValues;n(this,e);var g,T,q,A,F,I,P,S=0,D=0,U=.3*w,V=!1,X=!1,Y=!1,j=!1,C=[];!function(){if(!(y="string"==typeof y?o.querySelector(y):y))throw new Error("IMPETUS: source not found.");if(!x)throw new Error("IMPETUS: update function not defined.");M&&(M[0]&&(S=M[0]),M[1]&&(D=M[1]),u()),y.addEventListener("touchstart",c),y.addEventListener("mousedown",c)}(),this.destroy=function(){return y.removeEventListener("touchstart",c),y.removeEventListener("mousedown",c),null},this.pause=function(){X=!1,Y=!0},this.resume=function(){Y=!1},this.setValues=function(e,t){"number"==typeof e&&(S=e),"number"==typeof t&&(D=t)},this.setMultiplier=function(e){w=e,U=.3*w}};t.exports=u});